(()=>{"use strict";var e,t,r,n,o,a={4573:(e,t,r)=>{r.d(t,{B:()=>d,_:()=>m});var n=r(5816),o=r(378),a=r(4549),u=r(4092),s=r(3496),c=a.D.HOST_URL,i=a.D.LOGIN_URL,l=a.g.POST,d=(0,n.xP)({reducerPath:"signIn",baseQuery:(0,o.cw)({baseUrl:c}),endpoints:function(e){return{login:e.mutation({query:function(e){return{url:i,method:l,body:e}},transformResponse:u.S,transformErrorResponse:s.Mv})}}}),m=d.useLoginMutation},3496:(e,t,r)=>{r.d(t,{Lc:()=>E,Mv:()=>h,c3:()=>y,c5:()=>v,cX:()=>b,eV:()=>R});var n=r(5816),o=r(378),a=r(4549),u=r(4092),s=r(967),c=a.D.HOST_URL,i=a.D.READ_URL,l=a.D.CREATE_URL,d=a.D.UPDATE_URL,m=a.D.DEETE_URL,f=a.g.POST,p=a.g.PUT,g=a.g.DELETE,h=function(e){return 403===e.status?Promise.reject(s._L.accessDeny):Promise.reject(e.status)},v=(0,n.xP)({reducerPath:"database",tagTypes:["Rows"],baseQuery:(0,o.cw)({baseUrl:c,prepareHeaders:function(e,t){var r=(0,t.getState)().userState.token;return r&&e.set("x-auth",r),e}}),endpoints:function(e){return{loadData:e.query({query:function(){return{url:i}},providesTags:function(e){return e?e.map((function(e){return{type:"Rows",id:e.id}})):[]},transformResponse:u.S,transformErrorResponse:h}),createRow:e.mutation({query:function(e){return{url:l,method:f,body:e}},invalidatesTags:["Rows"],transformResponse:u.S,transformErrorResponse:h}),updateRow:e.mutation({query:function(e){var t=e.id,r=function(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var o=0;for(n=Object.getOwnPropertySymbols(e);o<n.length;o++)t.indexOf(n[o])<0&&Object.prototype.propertyIsEnumerable.call(e,n[o])&&(r[n[o]]=e[n[o]])}return r}(e,["id"]);return{url:"".concat(d,"/").concat(t),method:p,body:r}},invalidatesTags:["Rows"],transformResponse:u.S,transformErrorResponse:h}),deleteRow:e.mutation({query:function(e){return{url:"".concat(m,"/").concat(e),method:g}},invalidatesTags:["Rows"],transformResponse:u.S,transformErrorResponse:h})}}}),y=v.useLoadDataQuery,E=v.useCreateRowMutation,b=v.useUpdateRowMutation,R=v.useDeleteRowMutation},4549:(e,t,r)=>{r.d(t,{D:()=>o,g:()=>a});var n=r(1470),o=n.A?{HOST_URL:"https://test.v5.pryaniky.com",LOGIN_URL:"/ru/data/v3/testmethods/docs/login",READ_URL:"/ru/data/v3/testmethods/docs/userdocs/get",CREATE_URL:"/ru/data/v3/testmethods/docs/userdocs/create",UPDATE_URL:"/ru/data/v3/testmethods/docs/userdocs/set",DEETE_URL:"/ru/data/v3/testmethods/docs/userdocs/delete"}:{HOST_URL:"http://localhost:3300",LOGIN_URL:"login",READ_URL:"data",CREATE_URL:"data",UPDATE_URL:"data",DEETE_URL:"data"},a=n.A?{GET:"GET",POST:"POST",PUT:"POST",DELETE:"POST"}:{GET:"GET",POST:"POST",PUT:"PUT",DELETE:"DELETE"}},4213:(e,t,r)=>{r.d(t,{k:()=>c});var n=r(6540),o=r(7514),a=r(1641),u=r(7809);const s=function(e){var t=e.onclose;return n.createElement(n.Fragment,null,n.createElement(a.A,{size:"small","aria-label":"close",color:"inherit",onClick:t},n.createElement(u.A,{fontSize:"small"})))};var c=function(){var e=(0,o.dh)().enqueueSnackbar;return{showSnackbar:function(t,r){t&&e(t,{variant:r||"error",action:function(e){return n.createElement(s,{onclose:function(){return(0,o.mk)(e)}})}})}}}},2883:(e,t,r)=>{var n=r(6540),o=r(5338),a=r(1468),u=r(7834),s=r(9220),c=function(){var e=(0,s.GV)((function(e){return e.userState})),t=e.username,r=e.token;return{isAuth:!!r,username:t,token:r}},i=r(8987),l=function(e){i.A.remove(e)},d=function(e){return i.A.get(e)},m=r(1817),f=r(538),p=r(3496),g=(0,n.lazy)((function(){return Promise.all([r.e(550),r.e(834),r.e(469)]).then(r.bind(r,5469))}));const h=function(){var e=(0,p.c3)(),t=e.data,r=e.isLoading;return n.createElement(n.Suspense,null,n.createElement(f.A,null,n.createElement(g,{data:t||[],loading:r})))};var v=r(4213),y=r(967),E=r(9828),b=r(9067),R=r(4073),O=r(1641),_=r(7451),S=r(8532);const T=function(){var e=(0,s.jL)(),t=c(),r=t.isAuth,o=t.username;return n.createElement(b.A,{sx:{flexGrow:1}},n.createElement(E.A,{position:"fixed"},n.createElement(S.A,{sx:{paddingRight:{xs:1},minHeight:{xs:"".concat(56,"px")}}},n.createElement(R.A,{variant:"h6",component:"div",sx:{flexGrow:1}},y.R_.app_bar_title),r&&n.createElement(n.Fragment,null,n.createElement(R.A,{variant:"h6",component:"span"},o),n.createElement(O.A,{size:"medium",color:"inherit","aria-label":"logout",sx:{ml:1},onClick:function(){e((0,m.g)({username:null,token:null}))}},n.createElement(_.A,null))))))};var A=(0,n.lazy)((function(){return Promise.all([r.e(550),r.e(750)]).then(r.bind(r,2750))}));var w=r(5793),P=(0,r(3478).A)({components:{MuiButton:{defaultProps:{disableRipple:!0}},MuiTextField:{defaultProps:{size:"small",margin:"dense"}}}}),k=r(7514),L=document.getElementById("root");(0,o.H)(L).render(n.createElement(n.StrictMode,null,n.createElement(a.Kq,{store:s.M_},n.createElement(w.A,{theme:P},n.createElement(k.n,{maxSnack:3},n.createElement((function(){var e,t,r,o,a,f=function(){var e=(0,s.jL)(),t=c(),r=t.isAuth,o=t.username,a=t.token,u=(0,n.useState)(!0),f=u[0],p=u[1];return(0,n.useEffect)((function(){var t={username:d("username")||null,token:d("token")||null},r=t.username,n=t.token;e(r&&n?(0,m.g)({username:r,token:n}):(0,m.g)({username:null,token:null})),p(!1)}),[]),(0,n.useEffect)((function(){var e;r||f||(l("username"),l("token")),r&&!f&&o&&a&&(e={username:o,token:a},Object.keys(e).forEach((function(t){return i.A.set(t,e[t])})))}),[r]),{isAuth:r,username:o}}().isAuth;return t=(0,s.jL)(),r=(0,v.k)().showSnackbar,o=(e=(0,s.GV)((function(e){return e.userState})),{loading:"loading"===e.status,error:e.error}).error,a=(0,s.GV)((function(e){return e.databaseErrorState.error})),(0,n.useEffect)((function(){o&&r(o),a&&r(a),a===y.Jm[y._L.accessDeny]&&t((0,m.g)({username:null,token:null}))}),[o,a]),n.createElement(n.Fragment,null,n.createElement(T,null),n.createElement(u.A,{id:"app",maxWidth:"lg",sx:{mt:"".concat(56,"px")}},!f&&n.createElement(n.Suspense,null,n.createElement(A,null)),f&&n.createElement(h,null)))}),null))))))},3717:(e,t,r)=>{r.d(t,{Ay:()=>v,E2:()=>h,pd:()=>f,mA:()=>p,_H:()=>g});var n,o,a,u=r(5307),s=function(){return s=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var o in t=arguments[r])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},s.apply(this,arguments)},c={reducer:function(e,t){e[t.payload.name]=s(s({},t.payload.inputPayload),{unTouched:!1})},prepare:function(e,t,r){return{payload:{name:e,inputPayload:{value:t,error:r}}}}},i={error:"",value:"",unTouched:!0},l=r(967),d=function(){return d=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var o in t=arguments[r])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},d.apply(this,arguments)},m=(0,u.Z0)(("login",o={setLoginInputField:c},a={username:d(d({},i),{error:l._L.notEmpty}),password:d(d({},i),{error:l._L.notEmpty})},{name:"form/".concat("login"),initialState:a,reducers:s({setInitialValues:function(e,t){return t.payload},setTouchedAll:function(e){for(var t=0,r=Object.keys(e);t<r.length;t++)e[r[t]].unTouched=!1},resetForm:function(e){return a}},o)})),f=function(e){return function(e){for(var t=0,r=Object.values(e);t<r.length;t++)if(r[t].error)return!1;return!0}(e.loginFormState)},p=((n=m.actions).setInitialValues,n.setLoginInputField),g=n.setTouchedAll,h=n.resetForm;const v=m.reducer},9220:(e,t,r)=>{r.d(t,{M_:()=>p,jL:()=>g,GV:()=>h});var n=r(5307),o=r(1468),a=r(1817),u=r(3717),s=r(4573),c=r(3496),i=r(967),l=function(e){return i.Jm[e]||e};const d=(0,n.Z0)({name:"database-errors",initialState:{error:""},reducers:{},extraReducers:function(e){e.addMatcher(s.B.endpoints.login.matchPending,(function(e,t){e.error=""})),e.addMatcher(c.c5.endpoints.loadData.matchRejected,(function(e,t){e.error=l(t.error.message||"")})),e.addMatcher(c.c5.endpoints.createRow.matchRejected,(function(e,t){e.error=l(t.error.message||"")})),e.addMatcher(c.c5.endpoints.updateRow.matchRejected,(function(e,t){e.error=l(t.error.message||"")})),e.addMatcher(c.c5.endpoints.deleteRow.matchRejected,(function(e,t){e.error=l(t.error.message||"")}))}}).reducer;var m;const f=((m={userState:a.A,loginFormState:u.Ay,databaseErrorState:d})[s.B.reducerPath]=s.B.reducer,m[c.c5.reducerPath]=c.c5.reducer,m);var p=(0,n.U1)({reducer:f,middleware:function(e){return e().concat(s.B.middleware).concat(c.c5.middleware)}}),g=o.wA,h=o.d4},1817:(e,t,r)=>{r.d(t,{A:()=>c,g:()=>s});var n=r(5307),o=r(967),a=r(4573),u=(0,n.Z0)({name:"user",initialState:{username:null,token:null,status:"idle",error:""},reducers:{setUser:function(e,t){var r=t.payload,n=r.username,o=r.token;e.username=n,e.token=o}},extraReducers:function(e){e.addMatcher(a.B.endpoints.login.matchPending,(function(e){e.status="loading",e.error=""})),e.addMatcher(a.B.endpoints.login.matchRejected,(function(e,t){var r=t.error.message;e.status="failed";var n=r===o._L.accessDeny?o._L.signIn:"";e.error=n||o.Jm[r||"unknown"]})),e.addMatcher(a.B.endpoints.login.matchFulfilled,(function(e,t){var r=t.payload.token,n=t.meta;e.status="idle",e.error="",e.token=r,e.username=n.arg.originalArgs.username}))}}),s=u.actions.setUser;const c=u.reducer},1470:(e,t,r)=>{r.d(t,{A:()=>n});const n=!0},967:(e,t,r)=>{var n;r.d(t,{Jm:()=>a,R_:()=>u,_5:()=>s,_L:()=>o});var o={notEmpty:"Поле не должно быть пустым",accessDeny:"Access deny",signIn:"Неверный логин или пароль",documentNotFound:"Document not found",aborted:"Aborted",abortedErrorName:"AbortError",unknown_error:"Неизвестная ошибка"},a=((n={})["Access deny"]="Требуется авторизация",n["Document not found"]="Документ не найден",n["Bad request"]="Некорректный запрос",n.Aborted="Отмена",n.FETCH_ERROR="Проблема с соединением",n.unknown="Неизвестная ошибка",n),u={login:"Логин",password:"Пароль",app_bar_title:"База данных",addNewRecord:"Добавить запись",abortFetch:"Отменить отправку",askConfirm:"больше не спрашивать"},s={employeeNumber:"employee number",employeeSigDate:"employee signature date",documentStatus:"document status",documentType:"document type",documentName:"document name",companySigDate:"company signature date",companySignatureName:"company signature name",employeeSignatureName:"employee signature name"}},4092:(e,t,r)=>{r.d(t,{S:()=>n});var n=r(1470).A?function(e){var t=e.error_code,r=e.data,n=e.error_message,o=e.error_text;return 0===t?r:Promise.reject(o||n)}:function(e){return e}}},u={};function s(e){var t=u[e];if(void 0!==t)return t.exports;var r=u[e]={exports:{}};return a[e](r,r.exports,s),r.exports}s.m=a,e=[],s.O=(t,r,n,o)=>{if(!r){var a=1/0;for(l=0;l<e.length;l++){for(var[r,n,o]=e[l],u=!0,c=0;c<r.length;c++)(!1&o||a>=o)&&Object.keys(s.O).every((e=>s.O[e](r[c])))?r.splice(c--,1):(u=!1,o<a&&(a=o));if(u){e.splice(l--,1);var i=n();void 0!==i&&(t=i)}}return t}o=o||0;for(var l=e.length;l>0&&e[l-1][2]>o;l--)e[l]=e[l-1];e[l]=[r,n,o]},s.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return s.d(t,{a:t}),t},r=Object.getPrototypeOf?e=>Object.getPrototypeOf(e):e=>e.__proto__,s.t=function(e,n){if(1&n&&(e=this(e)),8&n)return e;if("object"==typeof e&&e){if(4&n&&e.__esModule)return e;if(16&n&&"function"==typeof e.then)return e}var o=Object.create(null);s.r(o);var a={};t=t||[null,r({}),r([]),r(r)];for(var u=2&n&&e;"object"==typeof u&&!~t.indexOf(u);u=r(u))Object.getOwnPropertyNames(u).forEach((t=>a[t]=()=>e[t]));return a.default=()=>e,s.d(o,a),o},s.d=(e,t)=>{for(var r in t)s.o(t,r)&&!s.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})},s.f={},s.e=e=>Promise.all(Object.keys(s.f).reduce(((t,r)=>(s.f[r](e,t),t)),[])),s.u=e=>e+".js",s.miniCssF=e=>{},s.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),s.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),n={},o="test-frontend-spa:",s.l=(e,t,r,a)=>{if(n[e])n[e].push(t);else{var u,c;if(void 0!==r)for(var i=document.getElementsByTagName("script"),l=0;l<i.length;l++){var d=i[l];if(d.getAttribute("src")==e||d.getAttribute("data-webpack")==o+r){u=d;break}}u||(c=!0,(u=document.createElement("script")).charset="utf-8",u.timeout=120,s.nc&&u.setAttribute("nonce",s.nc),u.setAttribute("data-webpack",o+r),u.src=e),n[e]=[t];var m=(t,r)=>{u.onerror=u.onload=null,clearTimeout(f);var o=n[e];if(delete n[e],u.parentNode&&u.parentNode.removeChild(u),o&&o.forEach((e=>e(r))),t)return t(r)},f=setTimeout(m.bind(null,void 0,{type:"timeout",target:u}),12e4);u.onerror=m.bind(null,u.onerror),u.onload=m.bind(null,u.onload),c&&document.head.appendChild(u)}},s.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},(()=>{var e;s.g.importScripts&&(e=s.g.location+"");var t=s.g.document;if(!e&&t&&(t.currentScript&&(e=t.currentScript.src),!e)){var r=t.getElementsByTagName("script");if(r.length)for(var n=r.length-1;n>-1&&(!e||!/^http(s?):/.test(e));)e=r[n--].src}if(!e)throw new Error("Automatic publicPath is not supported in this browser");e=e.replace(/#.*$/,"").replace(/\?.*$/,"").replace(/\/[^\/]+$/,"/"),s.p=e})(),(()=>{var e={792:0};s.f.j=(t,r)=>{var n=s.o(e,t)?e[t]:void 0;if(0!==n)if(n)r.push(n[2]);else{var o=new Promise(((r,o)=>n=e[t]=[r,o]));r.push(n[2]=o);var a=s.p+s.u(t),u=new Error;s.l(a,(r=>{if(s.o(e,t)&&(0!==(n=e[t])&&(e[t]=void 0),n)){var o=r&&("load"===r.type?"missing":r.type),a=r&&r.target&&r.target.src;u.message="Loading chunk "+t+" failed.\n("+o+": "+a+")",u.name="ChunkLoadError",u.type=o,u.request=a,n[1](u)}}),"chunk-"+t,t)}},s.O.j=t=>0===e[t];var t=(t,r)=>{var n,o,[a,u,c]=r,i=0;if(a.some((t=>0!==e[t]))){for(n in u)s.o(u,n)&&(s.m[n]=u[n]);if(c)var l=c(s)}for(t&&t(r);i<a.length;i++)o=a[i],s.o(e,o)&&e[o]&&e[o][0](),e[o]=0;return s.O(l)},r=self.webpackChunktest_frontend_spa=self.webpackChunktest_frontend_spa||[];r.forEach(t.bind(null,0)),r.push=t.bind(null,r.push.bind(r))})();var c=s.O(void 0,[823],(()=>s(2883)));c=s.O(c)})();
//# sourceMappingURL=main.js.map